{% extends 'base.html' %} {% block head %}
<title>Read Radar</title>
{% endblock %} {% block body %}
<div class="records">
  <h1>Reading Records</h1>
  {% if books %}
  <table border="1">
    <thead>
      <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Published Year</th>
        <th>Genres</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for book in books %}
      <tr>
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>{{ book.year }}</td>
        <td>
          {% if book.genres %} {{ book.genres|map(attribute='genre')|join(", ")
          }} {% else %} - {% endif %}
        </td>
        <td>
          <a
            href="/delete/{{ book.id }}"
            style="color: red; text-decoration: none"
            >Delete</a
          >
          |
          <a
            href="/update/{{ book.id }}"
            style="color: blue; text-decoration: none"
            >Edit</a
          >
          |
          <a
            href="/recommend/{{ book.id }}"
            style="color: green; text-decoration: none"
            >Find Similar Books</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <a href="/download">Export All Records</a>
  {% else %}
  <p>No books added yet. Start adding some!</p>
  {% endif %}
</div>

<form action="/" method="POST">
  <div>
    <label for="title">Title:</label>
    <input type="text" name="title" id="title" required />
  </div>
  <div>
    <label for="author">Author:</label>
    <input type="text" name="author" id="author" required />
  </div>
  <div>
    <label for="year">Published Year:</label>
    <input type="number" name="year" id="year" required />
  </div>
  <div>
    <label for="genres">Genres (comma-separated):</label>
    <input type="text" name="genres" id="genres" required />
  </div>
  <button
    type="submit"
    style="
      padding: 10px 20px;
      background-color: green;
      color: white;
      border: none;
      cursor: pointer;
    "
  >
    Add New Record
  </button>
</form>
<div>
  <h2>Import Books From Textfile</h2>
  {% include 'upload_form.html' %}
</div>
{% endblock %}
